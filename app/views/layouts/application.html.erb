<!DOCTYPE html>
<html>
<head>
  <title>
    <% if content_for? :title %>
      <%= yield :title %>
    <% else %> 
      Sales
    <% end %>
  </title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <div class='container'>
    <!-- navigation -->
    <nav class='navbar navbar-default navbar-fixed-top' role='navigation'>
      <!-- check if div class='container' is needed to wrap navbar header -->
      <div class='container'>
        <div class='navbar-header'>
          <%= link_to content_tag(:i, '', class: 'fa fa-table'), root_path, class: 'navbar-brand' %>
          <button type='button' class='navbar-toggle collapsed' data-toggle='collapse'
                  data-target='#collapse'>
            <span class='sr-only'>Toggle navigation</span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
          </button>
        </div> <!-- navbar-header -->
        <div id='collapse' class='collapse navbar-collapse'>
          <ul class='nav navbar-nav'>
            <li class='<%= 'active' if current_page? '/' %>'>
              <%= link_to 'Home', root_path, class: 'at-nav-home' %></li>
            <li class='<%= 'active' if current_page? '/todo' %>'>
              <%= link_to 'Todo', todo_path %></li>
            <!-- navbar-right -->
            <% unless user_signed_in? %>
              <li class='<%= 'active' if current_page? '/users/sign_up' %>'>
                <%= link_to  'Sign up', new_user_registration_path, 
                    class: 'at-nav-signup' %></li>
              <li class='<%= 'active' if current_page? '/users/sign_in' %>'>
                <%= link_to 'Sign in', new_user_session_path, class: 'at-nav-signin'%></li>
            <% end %>
          </ul>
          <% if user_signed_in? %>
            <div class='navbar-right'> 
                <p class='navbar-text'>
                  <span class='label label-default'>Signed in as
                    <%= current_user.email %></span></p>
                <ul class='nav navbar-nav'>
                  <li><%= link_to 'Sign out', destroy_user_session_path, method: :delete,
                          class: 'at-nav-signout' %></li>
                </ul>
            </div>
          <% end %>
        </div>
      </div>
    </nav>

    <% flash.each do |key, message| %>
      <div class='alert alert-<%= key %> 
           alert-dismissible' role='alert'>
        <button type='button' class='close' data-dismiss='alert' aria-label='Close'>
          <span aria-hidden='true'>&times;</span>
        </button>
        <%= message %>
      </div>
    <% end %>
    <%= yield %>
  </div>

</body>
</html>
